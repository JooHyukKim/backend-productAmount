# ver2. 과제 피드백

## 요구사항

- 하나의 상품에 쿠폰과 할인코드를 적용 하여 가격을 조회 하려 합니다.
- 상품 가격 조회 api를 완성해주세요.

## 참고사항

- 상품과 프로모션 정보의 스키마와 데이터가 제공 됩니다.
- promotion 테이블에는 'COUPON' 과 'CODE' 이라는 타입을 가지고있습니다.
    - 'COUPON'는 금액할인, 'CODE'는 % 할인으로 계산합니다.
    - promotion 할인 금액을 계산 할때는 상품 기존 가격에 대해 계산 해주시면 됩니다.
- promotion_products 테이블에는 각 promotion에 적용 될 상품들의 맵핑정보 입니다.

## 제약사항

- controller에 request 객체에 param은 그대로 사용 해주세요.(상품 1의 프로모션 2가지 적용)
- 결과는 ProductAmountResponse 객체를 리턴 해주세요.(주석참고)
- 쿠폰이 적용 되는지 검증 로직이 있어야 합니다.

## 도메인 로직

- 할인된 최소 상품가격은 10,000 이상어이야 합니다.
- 최종 상품 금액은 천단위 절삭합니다.

## 기타

- 자유롭게 라이브러리를 추가 하거나 소스 코드를 수정할 수 있습니다.
- 중복 코드 최소화를 고려해주세요.

---
---

# ver2. 과제 피드백

## 긍정

- [x] 다양한 테스트 케이스 작성하시는 부분이 좋았습니다.
- [x] <서비스 워크 플로우 && TODO List 정리> commit 의 전체적인 개발방향을 설정한 후 진행하시는 부분이 좋았습니다.
- [x] enum 타입을 전략객체처럼 사용하시는 부분이 인상깊었습니다.

## 부정

### 1. 가독성이 **없는** 서비스 함수

- 서비스 함수에서 비즈니스 로직의 흐름을 한눈에 알 수 있었으면 더 좋겠다고 생각되었다.
- 다음 순서로 함수를 구현하였으면 비즈니스 로직이 한눈에 들어왔을 것 같습니다. 
  - 파라미터 검증
  - 할인가격 산출
  - 응답객체 전달
- 또한 유닛테스트 작성 시 해당 함수들만 별도로 테스트할 수 있어 더 도움이 될 것 같습니다.
- discountedProduct라는 새로운 객체를 생성하지않고(deepCopy) originPrice 변수에 기존 상품 가격을 담아두고 로직을 전개했으면 더 좋겠다고 생각되었습니다.

